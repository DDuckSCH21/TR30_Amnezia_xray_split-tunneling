# TR30_Amnezia_xray_split-tunneling
Config for TR30(TR3000) Amnezia xray VPS with split-tunneling

Решил настроить роутер Cudy TR30(TR3000)v1 на работу с Amnezia xray, крутящемся на VPS, 
но чтобы не весь трафик шел через VPS, а только трафик к конкретным ресурсам.
Путь экспериментов был долог и в итоге я пришел к такому конфигу:
  - OpenWRT 24.10.0
  - sing-box 1.12.12


На данном конфиге не работает UDP, поэтому он пока больше как экспериментальный.
Жду версию sing-box 1.13 в которой пофиксили проблему с UDP

Sing-box отправляет весь трафик на tun0(который сам создает)
Анализирует трафик по dns + route rules.
После резолва sing-box решает:
  - домен из списка — трафик идёт через VLESS Reality (xray-out)
  - локальный/приватный IP — в обход, через direct
  - всё остальное — direct
